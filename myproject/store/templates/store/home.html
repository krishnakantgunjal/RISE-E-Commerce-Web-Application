{% extends "store/base.html" %}
{% load static %}

{% block content %}
<div class="page-container">

    <!-- Hero Banner Carousel -->
    <div class="banner-carousel">
        <div class="banner-slides">
            <div class="banner-slide active">
                <img src="{% static 'store/images/Banner (5).png' %}" alt="Welcome to RISE">
                <div class="banner-overlay">
                    <h1 class="banner-title">Welcome to RISE</h1>
                    <p class="banner-subtitle">Premium Shoes ‚Ä¢ Premium Style ‚Ä¢ Premium Comfort</p>
                    <a href="#products" class="btn btn-primary banner-btn">Shop Now</a>
                </div>
            </div>
            <div class="banner-slide">
                <img src="{% static 'store/images/Banner (1).png' %}" alt="New Collection">
                <div class="banner-overlay">
                    <h1 class="banner-title">New Collection</h1>
                    <p class="banner-subtitle">Discover the latest trends in footwear</p>
                    <a href="#products" class="btn btn-primary banner-btn">Explore Now</a>
                </div>
            </div>
            <div class="banner-slide">
                <img src="{% static 'store/images/Banner (2).png' %}" alt="Step Up Your Game">
                <div class="banner-overlay">
                    <h1 class="banner-title">Step Up Your Game</h1>
                    <p class="banner-subtitle">Performance meets style</p>
                    <a href="#products" class="btn btn-primary banner-btn">View Collection</a>
                </div>
            </div>
            <div class="banner-slide">
                <img src="{% static 'store/images/Banner (3).png' %}" alt="Summer Vibes">
                <div class="banner-overlay">
                    <h1 class="banner-title">Summer Vibes</h1>
                    <p class="banner-subtitle">Get ready for the season</p>
                    <a href="#products" class="btn btn-primary banner-btn">Shop Summer</a>
                </div>
            </div>
            <div class="banner-slide">
                <img src="{% static 'store/images/Banner (4).png' %}" alt="Exclusive Deals">
                <div class="banner-overlay">
                    <h1 class="banner-title">Exclusive Deals</h1>
                    <p class="banner-subtitle">Limited time offers you can't miss</p>
                    <a href="#products" class="btn btn-primary banner-btn">Grab Yours</a>
                </div>
            </div>
            <div class="banner-slide">
                <img src="{% static 'store/images/Banner (6).png' %}" alt="Urban Explorer">
                <div class="banner-overlay">
                    <h1 class="banner-title">Urban Explorer</h1>
                    <p class="banner-subtitle">Dominate the streets in style</p>
                    <a href="#products" class="btn btn-primary banner-btn">Shop Streetwear</a>
                </div>
            </div>
            <div class="banner-slide">
                <img src="{% static 'store/images/Banner (7).png' %}" alt="Classic Comfort">
                <div class="banner-overlay">
                    <h1 class="banner-title">Classic Comfort</h1>
                    <p class="banner-subtitle">Timeless designs for everyday wear</p>
                    <a href="#products" class="btn btn-primary banner-btn">Shop Classics</a>
                </div>
            </div>
            <div class="banner-slide">
                <img src="{% static 'store/images/Banner (8).png' %}" alt="Midnight Run">
                <div class="banner-overlay">
                    <h1 class="banner-title">Midnight Run</h1>
                    <p class="banner-subtitle">Reflective gear for night owls</p>
                    <a href="#products" class="btn btn-primary banner-btn">Shop Reflective</a>
                </div>
            </div>
            <div class="banner-slide">
                <img src="{% static 'store/images/Banner (9).png' %}" alt="Professional Edge">
                <div class="banner-overlay">
                    <h1 class="banner-title">Professional Edge</h1>
                    <p class="banner-subtitle">Elevate your office look</p>
                    <a href="#products" class="btn btn-primary banner-btn">View Formals</a>
                </div>
            </div>
            <div class="banner-slide">
                <img src="{% static 'store/images/Banner (10).png' %}" alt="Weekend Vibes">
                <div class="banner-overlay">
                    <h1 class="banner-title">Weekend Vibes</h1>
                    <p class="banner-subtitle">Relaxed styles for your downtime</p>
                    <a href="#products" class="btn btn-primary banner-btn">Shop Casuals</a>
                </div>
            </div>
        </div>

        <!-- Navigation Dots -->
        <div class="banner-dots">
            <span class="dot active" onclick="currentSlide(0)"></span>
            <span class="dot" onclick="currentSlide(1)"></span>
            <span class="dot" onclick="currentSlide(2)"></span>
            <span class="dot" onclick="currentSlide(3)"></span>
            <span class="dot" onclick="currentSlide(4)"></span>
            <span class="dot" onclick="currentSlide(5)"></span>
            <span class="dot" onclick="currentSlide(6)"></span>
            <span class="dot" onclick="currentSlide(7)"></span>
            <span class="dot" onclick="currentSlide(8)"></span>
            <span class="dot" onclick="currentSlide(9)"></span>
        </div>

        <!-- Navigation Arrows -->
        <button class="banner-prev" onclick="changeSlide(-1)">‚ùÆ</button>
        <button class="banner-next" onclick="changeSlide(1)">‚ùØ</button>
    </div>

    <!-- Collections Section -->
    <div id="collections" style="margin-bottom: 60px;">
        <h2 class="section-title">‚ú® Shop by Collection</h2>
        <div class="collection-grid">
            {% for category in categories %}
            <a href="{% url 'products_list' %}?category={{ category.slug }}" class="collection-card">
                <div class="collection-image-wrapper">
                    {% with category.products.first as first_prod %}
                    {% if first_prod and first_prod.image %}
                    <img src="{{ first_prod.image.url }}" alt="{{ category.name }}" class="collection-img">
                    {% else %}
                    <div class="collection-placeholder"></div>
                    {% endif %}
                    {% endwith %}
                </div>
                <div class="collection-content">
                    <h3>{{ category.name }}</h3>
                    <span class="explore-link">Explore Collection &rarr;</span>
                </div>
            </a>
            {% endfor %}
        </div>
    </div>

    <!-- Products Section -->
    <div id="products">
        <h2 class="section-title">üî• Trending Products</h2>

        {% if products %}
        <div class="product-grid">
            {% for product in products %}
            <div class="product-card">
                <a href="{% url 'product_detail' product.slug %}">
                    <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-img">
                </a>

                <div class="product-info">
                    <h3>{{ product.name }}</h3>
                    <p class="price">‚Çπ{{ product.price }}</p>

                    <div class="product-buttons">
                        <a class="btn btn-outline" href="{% url 'product_detail' product.slug %}">
                            View Details
                        </a>

                        <a class="btn btn-primary" href="{% url 'cart:cart_add' product.id %}">
                            Add to Cart
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="empty-state">
            <p>No products available at the moment.</p>
            <p style="color: var(--text-muted); font-size: 14px;">Check back soon for new arrivals!</p>
        </div>
        {% endif %}
    </div>

</div>

<!-- Banner Carousel Script -->
<script>
    let currentSlideIndex = 0;
    let slideInterval;

    function showSlide(index) {
        const slides = document.querySelectorAll('.banner-slide');
        const dots = document.querySelectorAll('.dot');

        if (index >= slides.length) currentSlideIndex = 0;
        if (index < 0) currentSlideIndex = slides.length - 1;

        slides.forEach(slide => slide.classList.remove('active'));
        dots.forEach(dot => dot.classList.remove('active'));

        slides[currentSlideIndex].classList.add('active');
        dots[currentSlideIndex].classList.add('active');
    }

    function changeSlide(direction) {
        currentSlideIndex += direction;
        showSlide(currentSlideIndex);
        resetInterval();
    }

    function currentSlide(index) {
        currentSlideIndex = index;
        showSlide(currentSlideIndex);
        resetInterval();
    }

    function autoSlide() {
        currentSlideIndex++;
        showSlide(currentSlideIndex);
    }

    function resetInterval() {
        clearInterval(slideInterval);
        slideInterval = setInterval(autoSlide, 5000);
    }

    // Auto-play carousel
    slideInterval = setInterval(autoSlide, 5000);

    // Pause on hover
    document.querySelector('.banner-carousel').addEventListener('mouseenter', () => {
        clearInterval(slideInterval);
    });

    document.querySelector('.banner-carousel').addEventListener('mouseleave', () => {
        slideInterval = setInterval(autoSlide, 5000);
    });
</script>

</script>

<style>
    .collection-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 30px;
        padding: 0 5px;
    }

    .collection-card {
        position: relative;
        border-radius: 16px;
        overflow: hidden;
        display: block;
        text-decoration: none;
        height: 280px;
        box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .collection-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
    }

    .collection-image-wrapper {
        width: 100%;
        height: 100%;
        position: relative;
    }

    /* Darker overlay for better text contrast */
    .collection-image-wrapper::after {
        content: '';
        position: absolute;
        inset: 0;
        background: rgba(0, 0, 0, 0.2);
        transition: background 0.3s ease;
    }

    .collection-card:hover .collection-image-wrapper::after {
        background: rgba(0, 0, 0, 0.1);
    }

    .collection-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.6s cubic-bezier(0.33, 1, 0.68, 1);
    }

    .collection-card:hover .collection-img {
        transform: scale(1.1);
    }

    .collection-placeholder {
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #1a2980 0%, #26d0ce 100%);
    }

    .collection-content {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(to top, rgba(0, 0, 0, 0.9) 0%, rgba(0, 0, 0, 0.6) 50%, transparent 100%);
        padding: 24px;
        color: #ffffff;
        z-index: 2;
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        height: 100%;
        pointer-events: none;
    }

    .collection-content h3 {
        margin: 0 0 8px 0;
        font-size: 26px;
        font-weight: 800;
        letter-spacing: -0.5px;
        color: #ffffff !important;
        text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
    }

    .explore-link {
        font-size: 14px;
        font-weight: 700;
        color: rgba(255, 255, 255, 0.95);
        text-transform: uppercase;
        letter-spacing: 1.5px;
        display: inline-flex;
        align-items: center;
        margin-top: 4px;
        text-shadow: 0 1px 4px rgba(0, 0, 0, 0.5);
    }

    .explore-link::after {
        content: '‚Üí';
        margin-left: 6px;
        transition: transform 0.3s ease;
    }

    .collection-card:hover .explore-link {
        color: #fff;
        text-decoration: none;
    }

    .collection-card:hover .explore-link::after {
        transform: translateX(5px);
    }
</style>

{% endblock %}