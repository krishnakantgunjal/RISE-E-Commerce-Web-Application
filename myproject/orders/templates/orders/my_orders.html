{% extends "store/base.html" %}
{% load static %}

{% block content %}
<div class="profile-container">

    <div class="profile-header">
        <h1>&#128230; My Orders</h1>
        <p>View and track all your orders</p>
    </div>

    {% if orders %}
    <div class="orders-list">
        {% for order in orders %}
        <div class="order-item">
            <div class="order-header">
                <span class="order-id">Order #{{ order.id }}</span>
                <span class="order-date">{{ order.created_at|date:"M d, Y" }}</span>
            </div>

            <div class="order-details">
                <p><strong>Order Total:</strong> <span style="color: var(--brand-primary); font-size: 18px; font-weight: 800;">&#8377;{{ order.total_amount|floatformat:2 }}</span></p>
                <p><strong>Status:</strong>
                    <span class="status-badge"
                        style="{% if order.status == 'delivered' %}background: var(--accent-green); color: white;{% elif order.status == 'cancelled' %}background: #dc2626; color: white;{% elif order.status == 'shipped' %}background: #2196f3; color: white;{% elif order.status == 'processing' %}background: #17a2b8; color: white;{% else %}background: #ffc107; color: white;{% endif %} padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600; text-transform: capitalize;">
                        {{ order.status }}
                    </span>
                </p>
                <p><strong>Payment:</strong>
                    <span
                        style="color: {% if order.payment_status == 'completed' %}var(--accent-green){% else %}var(--text-muted){% endif %}; font-weight: 600; text-transform: capitalize;">
                        {{ order.payment_status }}
                    </span>
                </p>
            </div>

            <div class="order-items">
                <p><strong>Items Ordered:</strong></p>
                {% for item in order.items.all %}
                <p class="order-product" style="margin: 8px 0; padding-left: 10px;">
                    &bull; <strong>{{ item.product.name }}</strong><br>
                    <span style="color: var(--text-muted); font-size: 14px; margin-left: 12px;">
                        Unit Price: &#8377;{{ item.price|floatformat:2 }} &times; Quantity: {{ item.quantity }} =
                        <strong style="color: var(--brand-primary);">&#8377;{{ item.subtotal|floatformat:2 }}</strong>
                    </span>
                </p>
                {% endfor %}
            </div>

            <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--border-color);">
                <a href="{% url 'orders:order_detail' order.id %}" class="btn btn-primary"
                    style="padding: 10px 20px; font-size: 14px;">
                    View Order Details &rarr;
                </a>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <p style="font-size: 60px; margin-bottom: 20px;">&#128230;</p>
        <h2>No orders yet</h2>
        <p>Start shopping to see your orders here</p>
        <a href="{% url 'home' %}" class="btn btn-primary">Browse Products</a>
    </div>
    {% endif %}

</div>
{% endblock %}