{% extends "store/base.html" %}
{% load static %}

{% block content %}
<div class="cart-container">

    <!-- Payment Header -->
    <div style="text-align: center; margin-bottom: 40px;">
        <h1 style="font-size: 32px; font-weight: 800; margin-bottom: 10px;">ðŸ’³ Payment Gateway</h1>
        <p style="color: var(--text-secondary); font-size: 16px;">(Demo Version - For Project Demonstration)</p>
    </div>

    <div class="cart-content" style="max-width: 900px; margin: 0 auto;">

        <!-- Order Summary Card -->
        <div class="checkout-form" style="margin-bottom: 30px;">
            <h2>ðŸ“‹ Order Summary</h2>

            <div style="margin-top: 20px;">
                <div style="padding: 15px; background: #f8fafc; border-radius: var(--radius-md); margin-bottom: 15px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span style="font-weight: 600;">Order ID:</span>
                        <span style="font-weight: 800; color: var(--brand-primary);">#{{ order.id }}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span style="font-weight: 600;">Customer:</span>
                        <span>{{ order.full_name }}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span style="font-weight: 600;">Phone:</span>
                        <span>{{ order.phone }}</span>
                    </div>
                </div>

                <!-- Order Items -->
                <div style="margin: 20px 0;">
                    <p style="font-weight: 700; margin-bottom: 10px; color: var(--text-primary);">Items:</p>
                    {% for item in order.items.all %}
                    <div
                        style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid var(--border-color);">
                        <span>{{ item.product.name }} (x{{ item.quantity }})</span>
                        <span style="font-weight: 600;">â‚¹{{ item.subtotal }}</span>
                    </div>
                    {% endfor %}
                </div>

                <!-- Total Amount -->
                <div
                    style="padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: var(--radius-md); margin-top: 20px;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span style="color: white; font-size: 18px; font-weight: 600;">Total Amount:</span>
                        <span style="color: white; font-size: 32px; font-weight: 800;">â‚¹{{ order.total_amount }}</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Payment QR Code Card -->
        <div class="checkout-form" style="text-align: center;">
            <h2 style="margin-bottom: 20px;">ðŸ“± Scan QR Code to Pay</h2>

            <!-- QR Code -->
            <div
                style="background: white; padding: 40px; border-radius: var(--radius-lg); box-shadow: 0 4px 20px rgba(0,0,0,0.1); margin: 30px auto; max-width: 400px;">
                <div
                    style="width: 250px; height: 250px; margin: 0 auto; background: white; border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center; position: relative;">
                    <!-- Real QR Code -->
                    <img src="https://api.qrserver.com/v1/create-qr-code/?size=230x230&data=http://127.0.0.1:8000/thanks-visiting/{{ order.id }}/"
                        alt="Scan to Pay" style="width: 230px; height: 230px;">
                </div>

                <p style="margin-top: 25px; font-size: 18px; font-weight: 600; color: var(--text-primary);">Amount:
                    &#8377;{{ order.total_amount|floatformat:2 }}</p>
            </div>

            <!-- Payment Completion Button -->
            <!-- Payment button removed as per request -->
            <p style="text-align: center; color: var(--text-muted); margin-top: 20px;">
                Scan the QR code above to complete your payment demonstration.
            </p>


        </div>

    </div>

</div>

<script>
    document.getElementById('paymentForm').addEventListener('submit', function (e) {
        e.preventDefault();

        // Show processing animation
        const button = this.querySelector('button');
        const originalText = button.innerHTML;
        button.disabled = true;
        button.innerHTML = 'â³ Processing Payment...';

        // Simulate payment processing delay
        setTimeout(() => {
            this.submit();
        }, 2000);
    });
</script>

<style>
    /* Payment page specific styles */
    .checkout-form {
        animation: fadeInUp 0.5s ease-out;
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* QR Code pulse animation */
    @keyframes pulse {

        0%,
        100% {
            box-shadow: 0 4px 20px rgba(102, 126, 234, 0.3);
        }

        50% {
            box-shadow: 0 4px 30px rgba(102, 126, 234, 0.6);
        }
    }
</style>
{% endblock %}